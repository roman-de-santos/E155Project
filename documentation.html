<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.21">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Documentation – E155ProjectPortfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea1d7ac60288e0f1efdbc993fd8432ae.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">E155ProjectPortfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./documentation.html" aria-current="page"> 
<span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./FPGA.html"> 
<span class="menu-text">FPGA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./MCU.html"> 
<span class="menu-text">MCU</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Specifications.html"> 
<span class="menu-text">Specifications and Results</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./team.html"> 
<span class="menu-text">Team</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./references.html"> 
<span class="menu-text">References</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sec-new-protocol" id="toc-sec-new-protocol" class="nav-link active" data-scroll-target="#sec-new-protocol"><span class="header-section-number">1</span> New Protocol I2S</a></li>
  <li><a href="#sec-new-hardware" id="toc-sec-new-hardware" class="nav-link" data-scroll-target="#sec-new-hardware"><span class="header-section-number">2</span> New Hardware</a>
  <ul class="collapse">
  <li><a href="#sec-PCM5102" id="toc-sec-PCM5102" class="nav-link" data-scroll-target="#sec-PCM5102"><span class="header-section-number">2.1</span> PCM5102 DAC</a></li>
  <li><a href="#sec-op-amps" id="toc-sec-op-amps" class="nav-link" data-scroll-target="#sec-op-amps"><span class="header-section-number">2.2</span> Op-Amp Hardware</a></li>
  </ul></li>
  <li><a href="#sec-schematics" id="toc-sec-schematics" class="nav-link" data-scroll-target="#sec-schematics"><span class="header-section-number">3</span> Schematic</a></li>
  <li><a href="#sec-block-diagram" id="toc-sec-block-diagram" class="nav-link" data-scroll-target="#sec-block-diagram"><span class="header-section-number">4</span> Analog Block Diagram</a></li>
  <li><a href="#sec-bill-of-materials" id="toc-sec-bill-of-materials" class="nav-link" data-scroll-target="#sec-bill-of-materials"><span class="header-section-number">5</span> Bill of Materials</a></li>
  <li><a href="#sec-github" id="toc-sec-github" class="nav-link" data-scroll-target="#sec-github"><span class="header-section-number">6</span> Github</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Documentation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<ul>
<li>New Communication Protocol <a href="#sec-new-protocol" class="quarto-xref">Section&nbsp;1</a></li>
<li>New Hardware <a href="#sec-new-hardware" class="quarto-xref">Section&nbsp;2</a>
<ul>
<li>PCM5102 DAC <a href="#sec-PCM5102" class="quarto-xref">Section&nbsp;2.1</a></li>
<li>Op Amp Hardware <a href="#sec-op-amps" class="quarto-xref">Section&nbsp;2.2</a></li>
</ul></li>
<li>Schematics <a href="#sec-schematics" class="quarto-xref">Section&nbsp;3</a></li>
<li>Analog Block Diagram <a href="#sec-block-diagram" class="quarto-xref">Section&nbsp;4</a></li>
<li>Bill of Materials <a href="#sec-bill-of-materials" class="quarto-xref">Section&nbsp;5</a></li>
<li>Github Breakdown <a href="#sec-github" class="quarto-xref">Section&nbsp;6</a></li>
</ul>
<section id="sec-new-protocol" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="sec-new-protocol"><span class="header-section-number">1</span> New Protocol I2S</h2>
<p>This section discusses the protocol used to communicate between the FPGA, MCU, and the DAC. Our group decided to use the I2S Standard format ( <a href="https://www.nxp.com/docs/en/user-manual/UM11732.pdf">NXP Semiconductors</a>) due to it being a standard audio format that at an initial review seemed relativly easy to implement in verilog.</p>
<p>From the image below, the I2S shows how the input data (SD) is serialized and uses a reference clock (sclk) to transfer the bits. word select (ws) dictates wether the line is transfering left or right chanel audio, where ws=0 means left chanel and ws=1 means right chanel. Since our group decided to do mono audio our data packet was duplicated accross both the left and right channel.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/I2sProtocol.png" class="img-fluid figure-img"></p>
<figcaption>Figure 1: I2S 3 Wire Protocol by NXP Semiconductors</figcaption>
</figure>
</div>
<p>Notice that the MSB of the current frame is one cycle delayed after WS toggles. For us it was also important to realize data by a transmitter is set on the negative edge of sclk while a reciever reads data on the positive edge of sclk. This prevents metastability issues making the protocol more reliable.</p>
<p>The overall bitsize is configurable, but we decided to use 16 bit audio since that was the minimum our DAC supported and our ADC only had a resolution of 12 bits.</p>
</section>
<section id="sec-new-hardware" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="sec-new-hardware"><span class="header-section-number">2</span> New Hardware</h2>
<p>This section contains a listing of our new hardware and a short description of its implementation.</p>
<section id="sec-PCM5102" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="sec-PCM5102"><span class="header-section-number">2.1</span> PCM5102 DAC</h3>
<p>This DAC was the most critical new component we using in our project. This DAC has native support for I2S to analog output. This circuit is also able to generate its own master clock based on the WS input</p>
<p>This bord uses a slightly different naming convention for the inputs compared to the official NXP Semiconductors standard, but the convention is similar.</p>
<table class="caption-top table">
<caption>Naming Convention Clarification</caption>
<colgroup>
<col style="width: 31%">
<col style="width: 27%">
<col style="width: 21%">
<col style="width: 19%">
</colgroup>
<thead>
<tr class="header">
<th>PCM5102 Naming</th>
<th style="text-align: left;">NXP Standard</th>
<th style="text-align: center;">Required?</th>
<th style="text-align: center;">Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SCLK</td>
<td style="text-align: left;">MCLK</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Master CLock for filtering/reference</td>
</tr>
<tr class="even">
<td>BCK</td>
<td style="text-align: left;">SCLK</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Bit clock</td>
</tr>
<tr class="odd">
<td>DIN</td>
<td style="text-align: left;">SD</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Serial data</td>
</tr>
<tr class="even">
<td>LCK</td>
<td style="text-align: left;">WS</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Left/Right select</td>
</tr>
</tbody>
</table>
<p>This DAC has control pins that can be shorted to H/L pads to reduce wiring complexity. Figure 2 shows these pins on the back of the DAC, labled HxL (x ranges from 1-4).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ControlPinsDAC.png" class="img-fluid figure-img"></p>
<figcaption>Figure 2: DAC Control Pins</figcaption>
</figure>
</div>
<p>The functionality of these pins are as follows (from this <a href="https://raspberrypi.stackexchange.com/questions/76188/how-to-make-pcm5102-dac-work-on-raspberry-pi-zerow">forum</a>):</p>
<ul>
<li>FLT - Filter select : Normal latency (Low) / Low latency (High)</li>
<li>DEMP - De-emphasis control for 44.1kHz sampling rate: Off (Low) / On (High)</li>
<li>XSMT - Soft mute control(1): Soft mute (Low) / soft un-mute (High)</li>
<li>FMT - Audio format selection : I2S (Low) / Left justified (High)</li>
</ul>
<p>Note we also grounded SCLK to ensure the master clock was internally generated by the chip.</p>
<p>Our setup for I2S audio used:</p>
<ul>
<li>FLT : Low</li>
<li>DEMP : Low</li>
<li>XSMT : High</li>
<li>FMT : Low</li>
</ul>
<p>After succesful setup, the dac was able to read I2S signals and correctly display its analog equivalent. This was tested by feeding a wavegen sinewave into the MCU’s ADC and passing the I2S output to the DAC and comparing the input and output waveform.</p>
<p>This peice of hardware introduced us to mixed signal processing, specifically in audio. Previously we had a lab, lab 4 where we used PWM waves to control a speaker. In this lab the output was strictly digital. With our new set up, our hardware expands on this and allows us to use many more intensity levels to create richer audio.</p>
</section>
<section id="sec-op-amps" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="sec-op-amps"><span class="header-section-number">2.2</span> Op-Amp Hardware</h3>
<p>For this project MCP6002 op Amps were used for the analog conditioning. From Figure 3, the schematic shows the initial conditioning was done by op-Amps U1A and U1B. This stage centers the signal around 1.65V since the MCU’s ADC can only read voltages between 0-3.3V. The input guitar signal is also quite weak at a max of 300mV, so a gain of 10.1 is applied to the input signal to increase the dynamic range the MCU can read.</p>
<p>The next stage consists of op Amps U2A and U2B. These op amps are two 2nd-order sallen-key low-pass filters in series. The cuttoff frequency of this circuit is about 27.4KHz thus the -3dB point is pushed slightly higher to ensure the 20kHz audio band remains flat, but not too far. This helps reduce the presence of high frequency signals from the guitar when the ADC samples the signal.</p>
<p>The next analog section with active filtering by op Amps is connected to the DAC output. Here an op Amp is used to regulate the signal back to to a safe range for the guitar amp since the amp expects voltages in the range of 100s of mV. The ouput of this topology is passed through an AC couple to remove DC bias, centering the wave back at zero and removing the offset we added initially to place it in the range of 0-3.3V for the MCU. This allows us to use the bipolar output of the guitar amp.</p>
</section>
</section>
<section id="sec-schematics" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="sec-schematics"><span class="header-section-number">3</span> Schematic</h2>
<p>Below in Figure 3 a schematic of our system is provided.The general flow of the diagram is left to right, top to bottom.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Schematic.png" class="img-fluid figure-img"></p>
<figcaption>Figure 3: Schematic</figcaption>
</figure>
</div>
</section>
<section id="sec-block-diagram" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="sec-block-diagram"><span class="header-section-number">4</span> Analog Block Diagram</h2>
<p>Below in Figure 4 the Block diagram for the Analog input shown. For more detailed block diagrams of each section (MCU/FPGA) please check their respective page.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/TopBlockDiagramAnalog.png" class="img-fluid figure-img"></p>
<figcaption>Figure 4: Analog Block Diagram</figcaption>
</figure>
</div>
</section>
<section id="sec-bill-of-materials" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="sec-bill-of-materials"><span class="header-section-number">5</span> Bill of Materials</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">Item Description</th>
<th style="text-align: left;">Part Number</th>
<th style="text-align: left;">Source</th>
<th style="text-align: center;">QTY</th>
<th style="text-align: center;">Unit Price</th>
<th style="text-align: center;">Shipping</th>
<th style="text-align: center;">Tax</th>
<th style="text-align: center;">Net Cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">DC Power Jack</td>
<td style="text-align: left;">A-1656</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/dc-power-jack-2-1mm-enclosed-frame-with-switch-white.html">Tayda Electronics</a></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0.14</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">1.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pedal Switch</td>
<td style="text-align: left;">A7459</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/3pdt-compact-stomp-foot-pedal-switch-on-on-latching-solder-lug.html">Tayda Electronics</a></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">2.70</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">3.89</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pot Knobs Plastic</td>
<td style="text-align: left;">A-4560</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/knob-davies-1900h-clone-cream.html">Tayda Electronics</a></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0.42</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">2.45</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pot Knobs Aluminium</td>
<td style="text-align: left;">A-5966</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/aluminium-silver-knob-15x17mm-shaft-hole-6x18t-5966.html">Tayda Electronics</a></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0.63</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">3.08</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Linear Pot 10K</td>
<td style="text-align: left;">A-8047</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/tayda-10k-ohm-linear-taper-potentiometer-spline-shaft-solder-lugs.html">Tayda Electronics</a></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0.59</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">2.96</td>
</tr>
<tr class="even">
<td style="text-align: left;">Log Pot 10K</td>
<td style="text-align: left;">A-1957</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/10k-ohm-logarithmic-taper-potentiometer-with-solder-lugs.html">Tayda Electronics</a></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0.50</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">2.69</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pot Cover</td>
<td style="text-align: left;">A-5527</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/dust-seal-covers-for-potentiometer.html">Tayda Electronics</a></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0.04</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">1.31</td>
</tr>
<tr class="even">
<td style="text-align: left;">PCB Standoffs</td>
<td style="text-align: left;">A-2868</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/hc-6-6mm-pcb-support-html.html">Tayda Electronics</a></td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">0.10</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">1.89</td>
</tr>
<tr class="odd">
<td style="text-align: left;">6.35mm Nut</td>
<td style="text-align: left;">A-6441</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/nut-for-6-35mm-socket-pj-669-and-pj-670.html">Tayda Electronics</a></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0.07</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">1.40</td>
</tr>
<tr class="even">
<td style="text-align: left;">9V Battery Holder</td>
<td style="text-align: left;">A-843</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/9v-battery-holder-6.html">Tayda Electronics</a></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">0.47</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">2.13</td>
</tr>
<tr class="odd">
<td style="text-align: left;">6.35mm 1/4” Stereo socket</td>
<td style="text-align: left;">A-5069</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/6-35mm-1-4-stereo-chassis-socket-jack-3-terminals.html">Tayda Electronics</a></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0.38</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">2.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">Enclosure</td>
<td style="text-align: left;">A-5837</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/cream-125b-style-aluminum-diecast-enclosure.html">Tayda Electronics</a></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">5.99</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">7.18</td>
</tr>
<tr class="odd">
<td style="text-align: left;">6.35mm 1/4” Mono Socket</td>
<td style="text-align: left;">A-4556</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/6-35mm-1-4-mono-chassis-socket-jack.html">Tayda Electronics</a></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">0.87</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">2.93</td>
</tr>
<tr class="even">
<td style="text-align: left;">3PDT Nut</td>
<td style="text-align: left;">A-4802</td>
<td style="text-align: left;"><a href="https://www.taydaelectronics.com/m12-white-color-aluminum-nut-for-3pdt-footswitch.html">Tayda Electronics</a></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0.39</td>
<td style="text-align: center;">1.19</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;">1.58</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DAC PCM5102</td>
<td style="text-align: left;">B0DNW32Y46</td>
<td style="text-align: left;"><a href="https://www.amazon.com/PCM5102-PCM5102A-Digital-Converter-Raspberry/dp/B0DNW32Y46">Amazon</a></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">4.44</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0.44</td>
<td style="text-align: center;">9.75</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>TOTAL</strong></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>46.9</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="sec-github" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="sec-github"><span class="header-section-number">6</span> Github</h2>
<p>All of our source code is found on our project’s github <a href="https://github.com/roman-de-santos/E155Project">here</a>. Notible files are listed below.</p>
<ul>
<li><code>FPGA/</code>:
<ul>
<li><code>DSP/</code> Contains the chorus effect DSP algorithm with testbenches</li>
<li><code>I2S/</code> Contains I2S tx and rx module along with all testbench files</li>
<li><code>LFO/</code> Folder with the code to generate low frequency oscilations with a look up table</li>
<li><code>TOP/</code> A folder with all of the top module files and testbenches for the top module.</li>
</ul></li>
<li><code>LTspice/</code>:
<ul>
<li>Analog simulation files to verify circuit</li>
</ul></li>
<li><code>MCU/STMcubeMX/</code>:
<ul>
<li><code>core/</code> contains the src files and header files for the HAL library</li>
<li><code>STMcubeMX.ioc</code> configuration file for HAL library</li>
</ul></li>
<li><code>Quarto/</code>:
<ul>
<li>All of the website files for the project</li>
</ul></li>
<li><code>kiCAD/tremolo_guitar_pedal</code>:
<ul>
<li>All of the kiCAD files for this project, including source and rendered schematics</li>
</ul></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/roman-de-santos\.github\.io\/E155Project\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>